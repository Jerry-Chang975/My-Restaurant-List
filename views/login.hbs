<link rel='stylesheet' href='/stylesheets/login-style.css' />
<header>
  <!-- navigation -->
  <nav class='navbar navbar-light bg-light'>
    <div class='container'>
      <a class='navbar-brand' href='/'>
        <img
          src='https://assets-lighthouse.s3.amazonaws.com/uploads/image/file/6227/restaurant-list-logo.png'
          width='30'
          height='30'
          class='d-inline-block align-top'
          alt='我的餐廳清單'
        />
        我的餐廳清單
      </a>
    </div>
  </nav>
</header>
<div class='center-vertical'>
  <div class='w-25 mx-auto my-auto login-container' style='min-width: 250px;'>
    <form
      action='/users/login'
      method='POST'
      class='needs-validation'
      novalidate
    >
      <h1 class='h3 mb-3 fw-normal'>Log In</h1>
      <div class='form-floating'>
        <input
          type='email'
          class='form-control'
          id='email'
          name='email'
          placeholder='name@example.com'
          required
        />
        <label for='email'>Email address</label>
        <div class='invalid-feedback'>
          請輸入正確Email!
        </div>
      </div>
      <div class='form-floating mt-2'>
        <input
          type='password'
          class='form-control'
          id='password'
          name='password'
          placeholder='Password'
          required
        />
        <label for='password'>Password</label>
        <div class='invalid-feedback'>
          請輸入密碼!
        </div>
      </div>

      <div class='form-check text-start my-3'>
        <input class='form-check-input' type='checkbox' id='rememberMe' />
        <label class='form-check-label' for='rememberMe'>
          Remember me
        </label>
      </div>
      <button class='btn btn-primary w-100 py-2' type='submit'>
        login
      </button>
      <p class='mt-2'>
        New to here?
        <a href='/users/register'>Sign Up</a>
      </p>
    </form>
  </div>
</div>

<script>
  const rememberMe = document.querySelector('#rememberMe');
  const email = document.querySelector('#email');
  window.addEventListener('load', ()=>{
    rememberMe.checked = localStorage.getItem('rememberMe') === 'true'? true: false;
    email.value = localStorage.getItem('email') || '';
  })
  const form = document.querySelector('form');
  form.addEventListener('submit', function (event) {
    if (!form.checkValidity()) {
      event.preventDefault();
      event.stopPropagation();
    }
    form.classList.add('was-validated'); // 標記表單已驗證

  
  if (rememberMe.checked) {
    localStorage.setItem('email', document.querySelector('#email').value);
    localStorage.setItem('rememberMe', 'true');
  } else {
    localStorage.removeItem('email');
    localStorage.setItem('rememberMe', 'false');
  }
  });

</script>